@using System.Globalization
@model BudgetOnline.Web.Models.CurrencyWithFormula
@{
    var placeholder = "";
    if (ViewData.ModelMetadata.AdditionalValues.ContainsKey("placeholder"))
    {
        placeholder = ViewData.ModelMetadata.AdditionalValues["placeholder"].ToString();
    }

    ModelState state = ViewData.ModelState[ViewData.ModelMetadata.PropertyName];
    var value = Model.Sum.ToString(CultureInfo.CurrentUICulture);

    var cssClass = "span10 data-type-calculator input-block-level";
    if (state != null && state.Errors.Count > 0)
    {
        cssClass += " input-validation-error";
    }
}
<div class="row-fluid">
    <div class="input-append">
        @Html.TextBox("Formula", Model.Formula, new { @class = @cssClass, placeholder, autocomplete = "off" })}
        <span class="add-on"><i class="icon-circle-arrow-right"></i></span>
    </div>
</div>
<div class="row-fluid">
    <span style="padding-left: 1em; padding-right: .2em">Результат:</span>@Html.TextBox("Value", value, new { @class = "span3 calculator-result", @readonly = "readonly", autocomplete = "off" })
</div>
